<!DOCTYPE html>
<html lang="en">
{{> fragments/html_header}}
<body>
    {{> fragments/top_bar}}
    <div class="search-container">
        <h1>Search Classes</h1>
        
        <h2>Find Study Partners</h2>
        {{#errorMessage}}
        <p class="error">{{errorMessage}}</p>
        {{/errorMessage}}
        {{#successMessage}}
        <p class="success">{{successMessage}}</p>
        {{/successMessage}}
        <form method="post" action="/search-classes">
            <label for="classCode">Enter Class Code (e.g., CSCI4370):</label>
            <input type="text" id="classCode" name="classCode" required>
            <button type="submit">Search</button>
        </form>

        {{#classCode}}
        <h2>Users in {{classCode}}</h2>
        <p>Click on a user to view their other classes.</p>
        {{#usersInClass}}
        <div class="user-item">
            <a href="/profile/view?userId={{userId}}">{{firstName}} {{lastName}}</a>
            {{#isFollowing}}
            <form method="post" action="/profile/unfollow" style="display:inline;">
                <input type="hidden" name="userId" value="{{userId}}">
                <input type="hidden" name="classCode" value="{{classCode}}">
                <button type="submit" class="follow-btn unfollow" title="Unfollow">★ Unfollow</button>
            </form>
            {{/isFollowing}}
            {{^isFollowing}}
            <form method="post" action="/profile/follow" style="display:inline;">
                <input type="hidden" name="userId" value="{{userId}}">
                <input type="hidden" name="classCode" value="{{classCode}}">
                <button type="submit" class="follow-btn follow" title="Follow">☆ Follow</button>
            </form>
            {{/isFollowing}}
        </div>
        {{/usersInClass}}
        {{^usersInClass}}
        <p>No other users found in {{classCode}}.</p>
        {{/usersInClass}}
        {{/classCode}}
    </div>
    {{> fragments/footer}}
</body>
</html>